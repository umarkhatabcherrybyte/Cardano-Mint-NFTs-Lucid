import {
    Lucid,
    Blockfrost,
    Address,
    MintingPolicy,
    PolicyId,
    Unit,
    fromText,
    Data,
    applyParamsToScript
} from "https://deno.land/x/lucid@0.9.1/mod.ts"
export const secretSeed = "load obtain bachelor bid steak royal retreat gossip width method august boat plunge library mail pulse raw six smart news buddy party engine ride"
export const blockfrostKey="previewzvXmPoX1oeTTcrrv5yu2iKSVX54UfB11"

/**
 * {
    "type": "PlutusScriptV2",
    "description": "",
    "cborHex": "59090f59090c0100003233223322323232323232323232323232323232323232323232222222323253353232323232325335533533355300f12001323212330012233350052200200200100235001220011233001225335002102810010252325335333573466e3cd400488008d40208800809c0984ccd5cd19b87350012200135008220010270261026350012200235500122222222222200c102513357389201115554784f206e6f7420636f6e73756d65640002415335533532330235028001355001222222222222008102422135002222533500415335333573466e3c0080280a80a44ccd5cd19b87001480080a80a440a48840ac40944cd5ce24811657726f6e6720616d6f756e74206973206d696e746564000241024135001220023333573466e1cd55cea80324000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008cd4074078d5d0a80619a80e80f1aba1500b33501d01f35742a014666aa042eb94080d5d0a804999aa810bae502035742a01066a03a04e6ae85401cccd540840a1d69aba150063232323333573466e1cd55cea801240004664424660020060046464646666ae68cdc39aab9d5002480008cc8848cc00400c008cd40c9d69aba150023033357426ae8940088c98c80d4cd5ce01b01a81989aab9e5001137540026ae854008c8c8c8cccd5cd19b8735573aa004900011991091980080180119a8193ad35742a00460666ae84d5d1280111931901a99ab9c036035033135573ca00226ea8004d5d09aba2500223263203133573806406205e26aae7940044dd50009aba1500533501d75c6ae854010ccd5408408c8004d5d0a801999aa810bae200135742a004604c6ae84d5d1280111931901699ab9c02e02d02b135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a00c602a6ae84d5d1280311931900f99ab9c02001f01d3333573466e1cd55ce9baa0074800080788c98c8078cd5ce00f80f00e1bae007375c00e660246eb8020dd6803880d09931900d19ab9c4901035054350001a135573ca00226ea8004c8004d5406488448894cd40044d400c88004884ccd401488008c010008ccd54c01c4800401401000448c88c008dd6000990009aa80c911999aab9f0012501b233501a30043574200460066ae8800804c8c8c8cccd5cd19b8735573aa004900011991091980080180118051aba150023005357426ae8940088c98c804ccd5ce00a00980889aab9e5001137540024646464646666ae68cdc39aab9d5004480008cccc888848cccc00401401000c008c8c8c8cccd5cd19b8735573aa0049000119910919800801801180a1aba1500233500d013357426ae8940088c98c8060cd5ce00c80c00b09aab9e5001137540026ae854010ccd54021d728039aba150033232323333573466e1d4005200423212223002004357426aae79400c8cccd5cd19b875002480088c84888c004010dd71aba135573ca00846666ae68cdc3a801a400042444006464c6403466ae7006c06806005c0584d55cea80089baa00135742a00466a012eb8d5d09aba2500223263201433573802a02802426ae8940044d5d1280089aab9e500113754002266aa002eb9d6889119118011bab00132001355016223233335573e0044a032466a03066442466002006004600c6aae754008c014d55cf280118021aba200301113574200224464646666ae68cdc3a800a40004642446004006600a6ae84d55cf280191999ab9a3370ea0049001109100091931900899ab9c01201100f00e135573aa00226ea80048c8c8cccd5cd19b875001480188c848888c010014c020d5d09aab9e500323333573466e1d40092004232122223002005300a357426aae7940108cccd5cd19b875003480088c848888c004014c01cd5d09aab9e500523333573466e1d40112000232122223003005375c6ae84d55cf280311931900899ab9c01201100f00e00d00c135573aa00226ea80048c8c8cccd5cd19b8735573aa004900011980298031aba15002375a6ae84d5d1280111931900699ab9c00e00d00b135573ca00226ea80048848cc00400c0088c8cccd5cd19b8735573aa002900011bae357426aae7940088c98c8028cd5ce00580500409baa001232323232323333573466e1d4005200c21222222200323333573466e1d4009200a21222222200423333573466e1d400d2008233221222222233001009008375c6ae854014dd69aba135744a00a46666ae68cdc3a8022400c4664424444444660040120106eb8d5d0a8039bae357426ae89401c8cccd5cd19b875005480108cc8848888888cc018024020c030d5d0a8049bae357426ae8940248cccd5cd19b875006480088c848888888c01c020c034d5d09aab9e500b23333573466e1d401d2000232122222223005008300e357426aae7940308c98c804ccd5ce00a00980880800780700680600589aab9d5004135573ca00626aae7940084d55cf280089baa0012323232323333573466e1d400520022333222122333001005004003375a6ae854010dd69aba15003375a6ae84d5d1280191999ab9a3370ea0049000119091180100198041aba135573ca00c464c6401866ae700340300280244d55cea80189aba25001135573ca00226ea80048c8c8cccd5cd19b875001480088c8488c00400cdd71aba135573ca00646666ae68cdc3a8012400046424460040066eb8d5d09aab9e500423263200933573801401200e00c26aae7540044dd500089119191999ab9a3370ea00290021091100091999ab9a3370ea00490011190911180180218031aba135573ca00846666ae68cdc3a801a400042444004464c6401466ae7002c02802001c0184d55cea80089baa0012323333573466e1d40052002200a23333573466e1d40092000200a23263200633573800e00c00800626aae74dd5000a4c24002921035054310032001355006222533500110022213500222330073330080020060010033200135500522225335001100222135002225335333573466e1c005200000a0091333008007006003133300800733500b12333001008003002006003122002122001112200212212233001004003112323001001223300330020020011"
}

 */
console.log(blockfrostKey, secretSeed)
// set blockfrost endpoint
const lucid = await Lucid.new(
    new Blockfrost(
        "https://cardano-preview.blockfrost.io/api/v0",
        blockfrostKey
    ),
    "Preview"
);

// load local stored seed as a wallet into lucid
lucid.selectWalletFromSeed(secretSeed);
const addr: Address = await lucid.wallet.address();
console.log("own address: " + addr);

const utxos = await lucid.utxosAt(addr);
const utxo = utxos[0];
console.log("utxo: " + utxo.txHash + "#" + utxo.outputIndex);

const tn = fromText("Wali ahmed");
const image = fromText("");

const Params = Data.Tuple([Data.String,Data.BigInt, Data.String,Data.String]);
type Params = Data.Static<typeof Params>;
let policyId="";
const nftPolicy: MintingPolicy = {
    type: "PlutusV2",
    script: applyParamsToScript<Params>(
        "591349591346010000323232323322332232323233223232323232323232323232323232323232323232323232323233223232232323223232322323232533532323235003225335350022233500223503300125032215335005153355335333573466e1cd401088cccd54c06848004c8cd407888ccd407c00c004008d4070004cd4074888c00cc008004800488cdc00009a801111a80091111a8021119a801124000490011a80111111111111100624000900101b01a881b099ab9c4901164d756c7469706c652073637269707420696e707574730003515335333573466e20c8c0d0004ccd54c0504800488cd54c064480048d400488cd540f8008cd54c070480048d400488cd54104008ccd40048cc1112000001223304500200123304400148000004cd54c064480048d400488cd540f8008ccd40048cd54c074480048d400488cd54108008d5407c00400488ccd55406808c0080048cd54c074480048d400488cd54108008d54078004004ccd55405407800800540e0c8d4004888888888888ccd54c0844800488d40088888d401088cd400894cd4ccd5cd19b8f01700104c04b133504d00600810082008504500a3500422002002035036103613357389201135468652053656c6c6572206e6f742070616964000351035153353235001222222222222533533355302512001335028225335002210031001503d25335333573466e3c03c00411010c4d40fc004540f8010841104108d40108800840d84cd5ce24811c5468652053656c6c6572205369676e6174757265204d697373696e670003513263202f33573892011c54686520536372697074204164647265737320696e2073656c6c65720003153353333333574800c46666ae68cdc39aab9d5006480008cccd55cfa8031281791999aab9f500625030233335573e6ae89401c94cd4c8c8c8c8c8c8c8c8c8c8c8c8c8c8ccccccd5d200711999ab9a3370e6aae7540392000233335573ea01c4a08446666aae7d40389410c8cccd55cfa8071282211999aab9f500e25045233335573ea01c4a08c46666aae7d40389411c8cccd55cfa8071282411999aab9f500e25049233335573ea01c4a09446666aae7d40389412c8cccd55cfa8071282611999aab9f500e2504d233335573e6ae89403c94cd4cd40ec0f0d5d0a80d90a99a99a81e01e9aba1501b21533533503d03f35742a03642a66a666aa08409aa0826ae85406c854cd4ccd5410c1394108d5d0a80d90a99a99a8200259aba1501b2153353335504504d04e35742a03642a66a646464646666666ae900108cccd5cd19b8735573aa008900011999aab9f50042505c233335573ea0084a0ba46666aae7cd5d128029299a991919191999999aba400423333573466e1cd55cea8022400046666aae7d4010941948cccd55cfa8021283311999aab9f35744a00a4a66a66a0c80c26ae85401c854cd4c198d5d0a803909a83509198008018010a8340a83392833834033833128320311283192831928319283183209aba25001135573ca00226ea8004d5d0a80390a99a991919191999999aba400423333573466e1cd55cea8022400046666aae7d4010941988cccd55cfa8021283391999aab9f35744a00a4a66a66a0ca0c46ae85401c854cd4c19cd5d0a803909a83589198008018010a8348a83412834034834033928328319283212832128321283203289aba25001135573ca00226ea8004d5d0a803909a83089198008018010a82f8a82f1282f02f82f02e9282d82c9282d1282d1282d1282d02d89aba25001135573ca00226ea8004d5d0a80d90a99a99a8218291aba1501b2153353335504804c505835742a03642a66a666aa0920a8a0b26ae85406c854cd4c140d5d0a80d909a82d891999999999998008068060058050048040038030028020018010a82c8a82c0a82b8a82b0a82a8a82a0a8298a8290a8288a8280a8278a827128270278270268260258250248240238230228220219282081f9282012820128201282002089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a01242a66a604e6ae85402484d40d048cc00400c008540c8540c4940c40c80c40c0940b80b0940b4940b4940b4940b40b8840044c98c80b0cd5ce24810f496e76616c696420636f6e746578740002e53353333333574801246666ae68cdc3a803a400446666aae7d40248d40bc488004940b80bc8cccd5cd19b875008480008cccd55cfa80511a8180910011281781812817016015928161281612816128160169080089931901599ab9c490110496e76616c69642072656465656d65720002d53353333333574801846666ae68cdc39aab9d500c480008cccd55cfa8061281691999aab9f500c2502e233335573e6ae89403494cd54cd4c088d5d0a807909a818909198008018010a81790a99a98151aba1500f21350323002001150301502f2502f03002f02e2502c02a2502b2502b2502b2502b02c2100113263202a33573892010c496e76616c696420646174610002c102c13263202a3357389201035054350002c135744a00226aae7940044dd500089aab9d5002135573ca00226ea80044d5d1280089aab9e500113754002222444666aa600824002a04e66aa600e2400246a0024466aa0580046aa012002666aa600824002446a00444a66a666aa6018240026466a02044666a006440040040026a00244002246600244a66a004205a200205446a002446601400400a00c2006266a056008006a05000266aa600e2400246a002446466aa05a006600200a640026aa05e44a66a00226aa0140064426a00444a66a6601800401022444660040140082600c006004640026aa0504422444a66a00220044426600a004666aa600e2400200a0080022242444600600822424446002008640026aa04a442244a66a0022a04a44266a04c600800466aa600c24002008002640026aa0484422444a66a00226a00c006442666a01200a6008004666aa600e2400200a008002246a00244002246a00244004244246600200600444666ae68cdc780100080e00d891911999999aba400125017250172300337580044a02e4a02e030640026aa040446666aae7c0048d4061407c94cd4c010d5d080110a99a98021aba2003213501a335020002001150181501701823232323333333574800846666ae68cdc39aab9d5004480008cccd55cfa8021280c91999aab9f50042501a233335573e6ae89401494cd4c044d5d0a80390a99a98059aba15007213501e12330010030021501c1501b2501b01c01b01a2501801625017250172501725017018135744a00226aae7940044dd5000919191919191999999aba400623333573466e1cd55cea8032400046666aae7d4018940688cccd55cfa8031280d91999aab9f50062501c233335573ea00c4a03a46666aae7cd5d128039299a98089aba1500b2153353335501001b500f35742a01642a66a646464646666666ae900108cccd5cd19b875002480108cccd55cfa8021281391999aab9f35744a00a46a05264244460040086ae854018940a00a40a08cccd5cd19b875003480088cccd55cfa8029281411999aab9f35744a00c4a66a604a6ae85401c84d40ac4888c004010540a4940a40a80a48cccd5cd19b875004480008cccd55cfa80311a815091100192814815128140130128121281292812928129281281309aab9d5002135573ca00226ea8004d5d0a80590a99a99a80a80e9aba1500b213502312333300100500400300215021150201501f1501e2501e01f01e01d01c01b2501901725018250182501825018019135744a00226ae8940044d5d1280089aab9e500113754002266aa00201801422446446666666ae900055401494cd4c00cdd5801109a80b0008a80a2a802aa802aa80280a990009aa80e91191999aab9f002235016501d25335300635573aa00442a66a600c6aae79400c854cd4c018d5d1002909a80c99a80f99aa8108018010008a80b8a80b0a80a80b09aba1001112500f23232323333333574800846666ae68cdc39aab9d5004480008cccd55cfa8021280a11999aab9f500425015233335573e6ae89401494cd4c044d5d0a80390a99a99a8058081aba15007213501912330010030021501715016250160170160152501301125012250122501225012013135744a00226aae7940044dd50008911919191999999aba400423333573466e1d40092000233335573ea0084a02846666aae7cd5d128029299a98049aba15006213501735017001150152501501601523333573466e1d400d2002233335573ea00a46a02ca02a4a02a02c4a0280240224a0244a0244a0244a02402626aae7540084d55cf280089baa00123232323333333574800846666ae68cdc3a8012400c46666aae7d4010940488cccd55cf9aba2500525335300b35742a00c426a02a24444600800a2a0264a02602802646666ae68cdc3a801a400846666aae7d40149404c8cccd55cf9aba2500625335300d35742a00e426a02c24444600400a2a0284a02802a02846666ae68cdc3a8022400446666aae7d4018940508cccd55cf9aba2500725335300b35742a010426a02e24444600200a2a02a4a02a02c02a46666ae68cdc3a802a400046666aae7d401c940548cccd55cf9aba2500825335301235742a012426a03024444600600a2a02c4a02c02e02c4a02802402202001e4a0204a0204a0204a02002226aae7540084d55cf280089baa00123232323333333574800846666ae68cdc39aab9d5004480008cccd55cfa8021280891999aab9f500425012233335573e6ae89401494cd4c028d5d0a80390a99a98071aba15007213501612330010030021501415013250130140130122501000e2500f2500f2500f2500f010135744a00226aae7940044dd5000919191999999aba400323333573466e1cd55cea801a400046666aae7d400c9403c8cccd55cf9aba2500425335300c35742a00a426a0240022a0204a0200220204a01c0184a01a4a01a4a01a4a01a01c26aae7940044dd500091919191919191999999aba400723333573466e1d4009200c233335573ea00e46a026244444440064a02402646666ae68cdc3a801a401446666aae7d40208d4050488888880109404c0508cccd5cd19b875004480208cccd55cfa8049280a11999aab9f500725015233335573e6ae89402094cd4c048d5d0a80610a99a98089aba1500a2135019122222223300100900815017150162501601701601523333573466e1d40152006233335573ea0144a02a46666aae7d4024940588cccd55cf9aba2500a25335301335742a01a42a66a60286ae85403084d406848888888cc008024020540605405c9405c06005c0588cccd5cd19b875006480108cccd55cfa8059280b11999aab9f500b25017233335573e6ae89403094cd4c044d5d0a80710a99a980a9aba1500e213501b122222223300600900815019150182501801901801723333573466e1d401d2002233335573ea0184a02e46666aae7cd5d128069299a98089aba1500e213501a122222223007008150182501801901823333573466e1d40212000233335573ea01a4a03046666aae7cd5d128071299a98091aba1500f213501b122222223005008150192501901a0192501701501401301201101000f25010250102501025010011135573aa00a26ae89400c4d5d1280109aba25001135573ca00226ea80048c8c8c8c8c8ccccccd5d200311999ab9a3370ea004900111999aab9f500625010233335573ea00c4a02246666aae7d4018940488cccd55cf9aba2500725335300d35742a01442a66a601c6ae854028854cd4c03cd5d0a805109a80b8911998008028020018a80a8a80a0a8099280980a00980900891999ab9a3370ea006900011999aab9f500725011233335573e6ae89402094cd4c034d5d0a804909a80a09118010018a80912809009809128080070069280712807128071280700789aab9d5004135744a00226ae8940044d55cf280089baa0012333333357480024a0104a0104a01046a0126eb4008940200248c8c8c8ccccccd5d200211999ab9a3370ea004900111999aab9f50042500c233335573e6ae89401494cd4c024d5d0a803109a80789118008018a8069280680700691999ab9a3370ea006900011999aab9f50052500d233335573e6ae89401894cd4c028d5d0a803909a80809118010018a80712807007807128060050049280512805128051280500589aab9d5002135573ca00226ea80048ccccccd5d20009280312803128031280311a8039bae0020071223232323333333574800846666ae68cdc3a8012400846666aae7d40108d403048880049402c0308cccd5cd19b875003480088cccd55cfa8029280611999aab9f35744a00c4a66a60146ae85401c84d403c4888c00c01054034940340380348cccd5cd19b875004480008cccd55cfa80311a807091100112806807128060050048041280492804928049280480509aab9d5002135573ca00226ea80048c8c8c8ccccccd5d200211999ab9a3370ea004900111999aab9f500423500a00f2500900a23333573466e1d400d2000233335573ea00a46a01601e4a0140164a01200e00c4a00e4a00e4a00e4a00e01026aae7540084d55cf280089baa00149848488c00800c448800448004c8004d5402488cd400520002235002225335333573466e3c0080340240204c01c0044c01800cc8004d5402088cd400520002235002225335333573466e3c00803002001c40044c01800c4880084880044488008488488cc00401000c448848cc00400c009220100223370000400222464600200244660066004004003",
        [utxo.txHash, BigInt(utxo.outputIndex), tn,image],
        Params)
};

policyId = lucid.utils.mintingPolicyToId(nftPolicy);
// policyId="0c70f82d8d4c7737ea75e05e356e9e4a0751c5105faf7f4d2a59e7fc"
console.log("minting policy: " + policyId);

const unit: Unit = policyId + tn;

let metadataX = {};
let metadata1 = {
  name: "kuchbi2",
  image: "ipfs://QmWJbQZ4kwV9DuMNAL4ge391LUfQNLkavSucqjvtrutu5U",
  media_type: "image/jpeg",
  description: "",
  artist: "",
  ipfs: "QmWJbQZ4kwV9DuMNAL4ge391LUfQNLkavSucqjvtrutu5U",
  
};
let metadata2 = {
    name: "kuchbi3",
    image: "ipfs://QmWJbQZ4kwV9DuMNAL4ge391LUfQNLkavSucqjvtrutu5U",
    media_type: "image/jpeg",
    description: "",
    artist: "",
    ipfs: "QmWJbQZ4kwV9DuMNAL4ge391LUfQNLkavSucqjvtrutu5U",
      
  };
  
metadataX[metadata1.name] = metadata1;
metadataX[metadata2.name] = metadata2;

let obj = { [policyId]: metadataX };


const tx = await lucid
    .newTx()
    .mintAssets({[unit]: 1n}, Data.void())
    .attachMetadata("721", obj)
    .attachMintingPolicy(nftPolicy)
    .collectFrom([utxo])
    .complete();

const signedTx = await tx.sign().complete();
const txHash = await signedTx.submit();
console.log("tid: " + txHash);
